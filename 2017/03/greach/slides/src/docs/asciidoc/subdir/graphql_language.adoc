== Query language

[%notitle]
image::languages.jpg[background, size=50%]

=== Steps to execute a query

[%step]
- Define **SCHEMA** types
- Define **QUERY** types
- **EXECUTE queries** against schema

=== First example

[%notitle]
image::bond.gif[background, size=cover]

=== First example: SCHEMA

[source, groovy]
----
type Film {
  title: !String
  year: Int
}

type Queries {
   lastFilm: Film
   filmByYear(year: Int): Film
}

schema {
 query: Queries
}
----

http://facebook.github.io/graphql/

=== First example: SCHEMA

[%step]
- Client **CAN** add/omit as many optional fields as it wants
- Client **MUST** add mandatory fields in the query

=== First example : QUERY

[source, json]
.**query**: "give me the last James Bond film with its **title**
----
{
  lastFilm {
    title
  }
}
----

[source, json]
.**result**: "SPECTRE"
----
{
  "data": {
    "lastFilm": {
      "title": "SPECTRE"
    }
  }
}
----

=== Little bit closer

[source, json]
.query
----
{
  lastFilm { // <1>
    title    // <2>
  }
}
----

[%step]
- 1. **lastFilm**: Is the **query** I'm interested in
- 2. **title**: Is a specific **field** in the return type (Film)

=== Validation

[source, json]
.title is mandatory
----
type Film {
  title: !String
  year: Int
}
----

[source, json]
.invalid query
----
{
  lastFilm
}
----
