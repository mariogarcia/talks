== HTTP + +++<span style="color:#e535ab;font-weight:bold;">GraphQL</span>+++

=== +++<span style="color:#fdc329;"></span>+++

[%notitle]
image::ratpack_trio.jpg[background, size=cover]

=== +++<span style="color:#dea716;font-weight:bold;">Ratpack</span>+++ + +++<span style="color:#e535ab;font-weight:bold;">GraphQL</span>+++

[%step]
- **Ratpack** is a **set of Java libraries** for building scalable **HTTP** applications.
- It is a lean and powerful foundation, **not** an all-encompassing framework.

=== +++<span style="color:#dea716;font-weight:bold;">Ratpack</span>+++ + +++<span style="color:#e535ab;font-weight:bold;">GraphQL</span>+++ (cont.)

[%step]
- +++<span style="color:#dea716;font-weight:bold;">Ratpack</span>+++ (http://ratpack.io)
- +++<span style="color:#286b86;font-weight:bold;">GQL</span>+++ (https://grooviter.github.io/gql/)

=== New +++<span style="color:#dea716;font-weight:bold;">Ratpack</span>+++ application

[%step]
- Using Ratpack's https://ratpack.io/manual/current/quick-start.html#using_lazybones_project_templates[**Lazybones**] Templates
- +++<span style="color:#286b86;font-weight:bold;">GroovyConsole</span>+++ FTW

=== +++<span style="color:#286b86;font-weight:bold;">gql-ratpack</span>+++ provides

[%step]
- +++<span style="color:#e535ab;font-weight:bold;">GraphQL</span>+++ endpoint
- +++<span style="color:#e535ab;font-weight:bold;">GraphiQL console</span>+++

=== +++<span style="color:white;">Showtime!</span>+++

[%notitle]
image::ratpack_demo.jpg[background, size=cover]

=== +++<span style="color:#e535ab;font-weight:bold;"></span>+++

[%notitle]
image::grails_logo.jpg[background, size=50%]

=== +++<span style="color:#feb672;font-weight:bold;">GORM</span>+++ + +++<span style="color:#e535ab;font-weight:bold;">GraphQL</span>+++
https://grails.github.io/gorm-graphql/latest/guide/index.html

=== **Why** GRAILS / GORM ?

[%step]
* +++<span style="color:#feb672;font-weight:bold;">GORM</span>+++ &#10084; SQL/NoSQL Databases
* **Entities** Gorm => Types/Queries/Mutations GraphQL
* +++<span style="color:#e535ab;font-weight:bold;">GraphiQL</span>+++ out-of-the-box
* **Plugin** Grails 3 / Standalone

=== Mapping domain classes

[source, groovy]
----
include::{gorm}/grails-app/domain/bond/Film.groovy[tags=Film, indent=0]
----

=== Operations by default

=== +++<span style="color:white;"></span>+++
[cols="1,1", options="header"]
|===
|Type
|Operation

|Query
|film(id: ..)

|Query
|filmList(max: .., sort: .., etc)

|Query
|filmCount

|Mutation
|filmCreate(film: {})

|Mutation
|filmUpdate(id: .., film: {})

|Mutation
|filmDelete(id: ..)
|===

=== Custom Queries

[source, groovy]
----
include::{gorm}/grails-app/domain/bond/Film.groovy[tags=lastFilm, indent=0]
----

=== Grail & Spring

[source, groovy]
----
fetcher { env ->
    env.context.springSecurityService
}
----

[%step]
- **ApplicationContext** accessible from any fetcher
- **springSecurityService**

=== Moreover

[%step]
- Se puede optimizar la forma en la que se realizan las consultas
- Se pueden elegir como serializar los datos escalares (Fechas, monedas...)
